(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{41:function(e,t,n){e.exports=n(79)},46:function(e,t,n){},65:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(17),c=n.n(o),u=n(11),l=(n(46),n(5)),i=n(13),s=function(){return r.a.createElement("h1",null,"LOADING")},m=n(12),f=n.n(m),p=(n(63),function(e){return console.log(e),console.log("http://localhost:5000"),new Promise((function(t,n){return console.log(localStorage.getItem("token")),f()({url:"http://localhost:5000/signup",method:"POST",headers:{"Content-Type":"application/json"},data:{access_token:e}}).catch((function(e){return console.log(e.response),n(e)})),t()}))}),b=n(22),v=Object(a.createContext)(),d=function(e){var t=Object(a.useState)({auth:!1,token:null,user:null}),n=Object(i.a)(t,2),o=n[0],c=n[1],u=Object(b.useGoogleLogin)({clientId:"219554201012-e9v8ib95o9c5akujcvg1i9lrnu0bnuao.apps.googleusercontent.com",onSuccess:function(e){p(e.wc.access_token).then((function(t){return c(Object(l.a)(Object(l.a)({},e),{},{auth:!0,token:e.wc.access_token,user:t}))}))},onFailure:function(){return c(Object(l.a)(Object(l.a)({},o),{},{auth:!1,token:null,user:null}))},isSignedIn:!0}),m=u.signIn,f=u.loaded,d=Object(b.useGoogleLogout)({clientId:"219554201012-e9v8ib95o9c5akujcvg1i9lrnu0bnuao.apps.googleusercontent.com",onLogoutSuccess:function(){c(Object(l.a)(Object(l.a)({},o),{},{auth:!1,token:null,user:null}))},onFailure:function(){c(Object(l.a)(Object(l.a)({},o),{},{auth:!1,token:null,user:null}))}}).signOut;return f?r.a.createElement(v.Provider,Object.assign({value:{data:o,signIn:m,signOut:d}},e)):r.a.createElement(s,null)},g=function(){return Object(a.useContext)(v)},h=n(3),k=n.n(h),E=n(10),O=n(36),j=n(37),w=n(40),y=n(39),x=function(e){Object(w.a)(n,e);var t=Object(y.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return r.a.createElement("h2",null,"404: Not Found")}}]),n}(r.a.Component),S=n(2),C=(n(65),n(66),n(69),function(e){var t=function(){var t=Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signin();case 2:p();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signout();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(u.b,{className:"navbar-brand",to:"/"},"Home"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navigationbar","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navigationbar"},r.a.createElement("ul",{className:"nav navbar-nav ml-auto"},e.auth?r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{to:"",className:"nav-link",onClick:n},"Logout")):[r.a.createElement("li",{className:"nav-item",key:"login"},r.a.createElement(u.b,{className:"nav-link",to:"",onClick:t},"Login")),r.a.createElement("li",{className:"nav-item",key:"signup"},r.a.createElement(u.b,{className:"nav-link",to:"",onClick:t},"Sign Up"))])))}),T=function(e){return console.log(e.access_token),new Promise((function(t,n){f()({url:"http://localhost:5000/book",method:"POST",headers:{"Content-Type":"application/json"},data:e}).then((function(e){return t(e.data.user)})).catch((function(e){return n(e)}))}))},N=function(e){return new Promise((function(t,n){f()({url:"http://localhost:5000/unbook",method:"POST",headers:{"Content-Type":"application/json"},data:{access_token:e}}).then((function(e){return t(e.data.user)})).catch((function(e){return n(e)}))}))},I=Object(a.createContext)(),D=function(e){var t=g().data,n=Object(a.useState)({user:t.user,loading:!1,error:!1}),o=Object(i.a)(n,2),c=o[0],u=o[1];return r.a.createElement(I.Provider,Object.assign({value:{userData:c,updateUser:function(e){var t;null!=e?u(Object(l.a)(Object(l.a)({},c),{},{user:e})):(u(Object(l.a)(Object(l.a)({},c),{},{loading:!0})),new Promise((function(e,n){f()({url:"http://localhost:5000/userProfile",method:"POST",headers:{"Content-Type":"application/json"},data:{access_token:t}}).then((function(t){return e(t.data.user)})).catch((function(e){return n(e)}))})).then((function(e){return u(Object(l.a)(Object(l.a)({},c),{},{user:e,loading:!1}))})).catch((function(e){return u({error:!0,loading:!1})})))}}},e))},M=n(19),P=n(18),A=n(20),_=function(e){var t=function(e){var t=new Date;return e.getMinutes()<=30&&e.getMinutes()>0?t.setHours(e.getHours(),30,0,0):e.getMinutes()>30?t.setHours(e.getHours()+1,0,0,0):t.setTime(e.getTime()),t}(e);return 2*t.getHours()+t.getMinutes()/30},H=function(e,t){if(e>t)throw Error("start must be <= end");for(var n=new Array(t-e+1),a=0;a<n.length;a++,e++)n[a]=e;return n};n(77),n(78);var L=function(e){return r.a.createElement("div",null,e.booked?r.a.createElement("button",{onClick:function(){return e.unbook()}},"Unbook court"):e.selected?r.a.createElement("div",null,r.a.createElement("button",{onClick:e.book},"Book?"),r.a.createElement("button",{onClick:e.cancel},"Cancel")):null)},G=function(e){for(var t=r.a.createRef(),n=Object(a.useState)(!1),o=Object(i.a)(n,2),c=o[0],u=o[1],l=Object(a.useState)({}),s=Object(i.a)(l,2),m=s[0],f=s[1],p=[],b=1;b<=9;b++)p.push({id:b,title:"Court ".concat(b)});var v=function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a,r,o,c,l,i,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.start,a=t.end,r=t.resource,o=r.id,c=_(n),l=_(a),i=H(c,l),s=n.getDate(),u(!0),f({date:s,court:o,intervals:i});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var n=Object(E.a)(k.a.mark((function n(){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("hello"),n.next=3,e.book(m);case 3:t.current.getApi().refetchEvents();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),g=function(){var n=Object(E.a)(k.a.mark((function n(){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.unbook();case 2:t.current.getApi().refetchEvents();case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(L,{unbook:g,book:d,selected:c,selection:m,cancel:function(e){t.current.getApi().unselect(),u(!1)}}),r.a.createElement(M.a,{ref:t,plugins:[P.a,A.a],initialView:"resourceTimeGridDay",resources:p,events:"http://localhost:5000/events",editable:!0,eventOverlap:!1,selectable:!0,select:v,allDaySlot:!1,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",eventDidMount:function(e){e.event.id!=localStorage.getItem("id")?e.event.editable=!1:e.event.editable=!0},themeSystem:"bootstrap",timeZone:!1}))},U=function(){var e=Object(a.useContext)(I),t=(e.userData,e.updateUser),n=g(),o=n.signIn,c=n.signOut,u=n.data,l=function(){var e=Object(E.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.access_token=u.token,T(n).then((function(e){t(e)})).catch((function(e){return console.log("error booking",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(E.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(u.token).then((function(e){t(e)})).catch((function(e){return console.log("error unbooking",e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("main",null,r.a.createElement(C,{signin:o,signout:c,auth:!0}),r.a.createElement("div",{className:"container"},r.a.createElement(S.c,null,r.a.createElement(S.a,{exact:!0,path:"/",component:function(){return r.a.createElement(G,{book:l,unbook:i,isAuthenticated:!0})}}),r.a.createElement(S.a,{component:x}))))},B=function(){for(var e=r.a.createRef(),t=[],n=1;n<=9;n++)t.push({id:n,title:"Court ".concat(n)});return r.a.createElement("div",null,r.a.createElement(M.a,{ref:e,plugins:[P.a,A.a],initialView:"resourceTimeGridDay",resources:t,events:"http://localhost:5000/events",eventOverlap:!1,allDaySlot:!1,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",eventDidMount:function(e){e.event.id!=localStorage.getItem("id")?e.event.editable=!1:e.event.editable=!0},themeSystem:"bootstrap",timeZone:!1}))},F=function(){var e=g(),t=e.signIn,n=e.signOut;return r.a.createElement("main",null,r.a.createElement(C,{signin:t,signout:n,auth:!1}),r.a.createElement("div",{className:"container"},r.a.createElement(S.c,null,r.a.createElement(S.a,{exact:!0,path:"/",component:function(){return r.a.createElement(B,{isAuthenticated:!1})}}),r.a.createElement(S.a,{component:x}))))},J=function(e){var t=g().data;return console.log(t.auth),t.auth?r.a.createElement(U,null):r.a.createElement(F,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(u.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(d,null,r.a.createElement(D,null,r.a.createElement(J,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.2422994c.chunk.js.map