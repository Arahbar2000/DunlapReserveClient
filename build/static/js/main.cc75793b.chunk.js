(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t,n){e.exports=n.p+"static/media/tennis_court_image.19fc2658.jpg"},42:function(e,t,n){e.exports=n(79)},65:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},73:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(15),c=n.n(o),u=n(12),i=n(11),s=n.n(i),l=n(13),m=(n(65),n(2)),f=n.n(m),p=n(4),g=n(6),v=(n(67),n(68),function(e){var t=new Date;return e.getMinutes()<=30&&e.getMinutes()>0?t.setHours(e.getHours(),30,0,0):e.getMinutes()>30?t.setHours(e.getHours()+1,0,0,0):t.setTime(e.getTime()),t}),d=function(e){var t=v(e);return 2*t.getHours()+t.getMinutes()/30},b=function(e,t){if(e>t)throw Error("start must be <= end");for(var n=new Array(t-e+1),a=0;a<n.length;a++,e++)n[a]=e;return n};var h=function(e){var t=Object(a.useState)(v(new Date)),n=Object(g.a)(t,2),o=n[0],c=(n[1],function(e){var t=new Date,n=new Date;e.getDate()>t.getDate()&&(n.setTime(e.getTime()),n.setHours(7,0,0,0));var a=new Date(e.getTime());a.setHours(22,0,0,0);var r=new Date;return r.setDate(t.getDate()+1),[t,r,n,a]}(o)),u=Object(g.a)(c,4);return u[0],u[1],u[2],u[3],r.a.createElement("div",null,e.booked?r.a.createElement("button",{onClick:function(){return e.unbook()}},"Unbook court"):e.selected?r.a.createElement("button",{onClick:e.book},"Book?"):null)},k="http://localhost:5000",j="219554201012-e9v8ib95o9c5akujcvg1i9lrnu0bnuao.apps.googleusercontent.com",w=function(e){return new Promise((function(t,n){s()({url:k+"/court",method:"POST",headers:{"content-type":"application/json"},data:{court:e}}).then((function(e){return t(e.data)})).catch((function(e){return n(e)}))}))},O=n(33),E=n.n(O);n(69);r.a.memo((function(e){var t=Object(l.a)(),n=t.getAccessTokenSilently,o=t.isAuthenticated,c=Object(a.useState)("Empty"),u=Object(g.a)(c,2),i=u[0],s=u[1];return Object(a.useEffect)((function(){(function(){var t=Object(p.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(e.court).then((function(e){e.empty||s(e.user.displayName)})).catch((function(t){return console.log("error getting court ".concat(e.court," data"),t)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[o,e.court,n]),r.a.createElement("div",{className:"col"},r.a.createElement("h4",null,"Court ",i),r.a.createElement("img",{src:E.a,alt:"tennis court"}))}));var S=function(e){return e.access_token=localStorage.getItem("token"),console.log(e),new Promise((function(t,n){s()({url:k+"/book",method:"POST",headers:{"Content-Type":"application/json"},data:e}).then((function(e){return t(e.data.user)})).catch((function(e){return n(e)}))}))},y=function(){var e=localStorage.getItem("token");return new Promise((function(t,n){s()({url:k+"/unbook",method:"POST",headers:{"Content-Type":"application/json"},data:{access_token:e}}).then((function(e){return t(e.data.user)})).catch((function(e){return n(e)}))}))},I=function(){var e=localStorage.getItem("token");return console.log(e),new Promise((function(t,n){s()({url:k+"/userProfile",method:"POST",headers:{"Content-Type":"application/json"},data:{access_token:e}}).then((function(e){return t(e.data.user)})).catch((function(e){return n(e)}))}))},x=n(39),T=n(37),D=n(40),N=function(e){for(var t=r.a.createRef(),n=Object(a.useState)(!1),o=Object(g.a)(n,2),c=o[0],u=o[1],i=Object(a.useState)({}),s=Object(g.a)(i,2),l=s[0],m=s[1],v=[],k=1;k<=9;k++)v.push({id:k,title:"Court ".concat(k)});var j=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,r,o,c,i,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.start,a=t.end,r=t.resource,o=r.id,c=d(n),i=d(a),s=b(c,i),l=n.getDate(),u(!0),m({date:l,court:o,intervals:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var n=Object(p.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.book(l);case 2:t.current.getApi().refetchEvents();case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),O=function(){var n=Object(p.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.unbook();case 2:t.current.getApi().refetchEvents();case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(h,{unbook:O,booked:e.booked,book:w,selected:c,selection:l}),r.a.createElement(x.a,{ref:t,plugins:[T.a,D.a],initialView:"resourceTimeGridDay",resources:v,events:"http://localhost:5000/events",editable:!0,eventOverlap:!1,selectable:!0,select:j,allDaySlot:!1,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",eventDidMount:function(e){e.event.id!=localStorage.getItem("id")?e.event.editable=!1:e.event.editable=!0},themeSystem:"bootstrap"}))},C=n(34),P=n(35),H=n(41),M=n(38),_=function(e){Object(H.a)(n,e);var t=Object(M.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"render",value:function(){return r.a.createElement("h2",null,"404: Not Found")}}]),n}(r.a.Component),A=n(3),L=(n(73),n(74),function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),o=n[0],c=n[1];Object(a.useEffect)((function(){null!=localStorage.getItem("token")?c(!0):c(!1)}),[]);var i=function(){var t=Object(p.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signin();case 2:new Promise((function(e,t){return console.log(localStorage.getItem("token")),s()({url:k+"/signup",method:"POST",headers:{"Content-Type":"application/json"},data:{access_token:localStorage.getItem("token")}}).catch((function(e){return console.log(e.response),t(e)})),e()}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(p.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signin();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(p.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signout();case 2:c(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(u.b,{className:"navbar-brand",to:"/"},"Home"),r.a.createElement("div",{className:"collapse navbar-collapse"},r.a.createElement("ul",{className:"nav navbar-nav ml-auto"},o?r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{to:"",className:"nav-link",onClick:m},"Logout")):[r.a.createElement("li",{className:"nav-item",key:"login"},r.a.createElement(u.b,{className:"nav-link",to:"",onClick:l},"Login")),r.a.createElement("li",{className:"nav-item",key:"signup"},r.a.createElement(u.b,{className:"nav-link",to:"",onClick:i},"Sign Up"))])))}),B=n(17),F=function(){var e=Object(a.useState)(!1),t=Object(g.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),u=Object(g.a)(c,2),i=u[0],s=u[1],l=Object(B.useGoogleLogin)({clientId:j,onSuccess:function(e){s(!0),localStorage.setItem("token",e.wc.access_token),localStorage.setItem("id",e.googleId)},onFailure:function(e){s(!1),localStorage.removeItem("token"),localStorage.removeItem("id")},isSignedIn:!0}),m=l.signIn,v=(l.loaded,Object(B.useGoogleLogout)({clientId:j,onSuccess:function(e){s(!1),localStorage.removeItem("token"),localStorage.removeItem("id")},onFailure:function(e){s(!1),localStorage.removeItem("token"),localStorage.removeItem("id")}}).signOut);Object(a.useEffect)((function(){i&&I().then((function(e){e.booking&&o(!0)}))}),[n]);var d=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(t).then((function(e){e.booking?o(!0):o(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y().then((function(e){e.booking?o(!0):o(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("main",null,r.a.createElement(L,{signin:m,signout:v}),r.a.createElement("div",{className:"container"},r.a.createElement(A.c,null,r.a.createElement(A.a,{exact:!0,path:"/",component:function(){return r.a.createElement(N,{booked:n,book:d,unbook:b})}}),r.a.createElement(A.a,{component:_}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.createContext();c.a.render(r.a.createElement(u.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.cc75793b.chunk.js.map